<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
        <title>Facelet Title</title>
    </h:head>
    <h:body>
            <div class="container my-3" id="paramentrizacionesAlerta" >
                <h:form>
                <div class="card bg-primary text-white">
                    <h4 class="card-header text-center ">Consulta Vehiculos</h4>        
                </div>   
                 
                  <h:panelGroup id="consultas">
                   <div class="form-group">
                        <h:outputLabel id="EstadoServicio" for="EstadoServicio" class="font-weight-bold" >
                            Tipo de Busqueda: 
                            <h:outputLabel class="h5 text-danger" value="*" />
                        </h:outputLabel>
                      <div class ="row">
                        <div class="col-4"> 
                          <h:selectOneMenu class="form-control form-inline" value="#{main.tipoBusqueda}">
                            <f:selectItem itemValue="Matricula" itemLabel="Matricula" />
                            <f:selectItem itemValue="Numero de Serie" itemLabel="Numero de Serie" />
                            <f:selectItem itemValue="CURP" itemLabel="CURP" />
                            <f:ajax render="seleccion"/>
                        </h:selectOneMenu>
                       </div>
                       <div class="col-6">   
                         <h:inputText  maxlength="#{main.tipoBusqueda eq 'Matricula' ? '7' : 
                                                   main.tipoBusqueda eq 'CURP' ? '18' : 
                                                   main.tipoBusqueda eq 'Numero de Serie' ? '200' : '500'}" 
                                       class="form-control "  id="seleccion" 
                                       value="#{main.valorBusqueda}" />
                        </div>
                      </div>
                    </div>                            
                  </h:panelGroup>
                              
                <div class="form-group col justify-content-center text-center">
                      <h:commandButton id="btnConsultar" class="btn btn-primary" value="Consultar"                                             
                                                  action="#{main.conectar()}">
                      <f:ajax listener="#{main.limpiar()}" render="consultas"/>
                      </h:commandButton>
                 </div>   
          
            <h:panelGroup id="panelTablasAlerta">
                            <div class="list-group-item">
                                <div  class="table-responsive" style="width:100%; ">
                                    <h:dataTable id="tablaAlertas"
                                                 value="#{main.vehiculos}"
                                                 var="vehiculos"
                                                 class="tableViewCont table table-sm table-striped table-hover w-100">
                                        #{vehiculos.color}
                                        <h:column id="IdAlerta">
                                            <f:facet id="facetColumnIdAlerta" name="header">
                                                <h:outputLabel id="optLabelIdAlerta" value="Nombre"/>
                                            </f:facet>
                                            <h:outputText id="optxColumIdAlerta" value="#{vehiculos.nombre}"/>
                                        </h:column>
                                        <h:column id="columnUsuario">
                                            <f:facet id="facetColumnUsuario" name="header">
                                                <h:outputLabel id="optLabelUsuario" value="Apellido"/>
                                            </f:facet>
                                            <h:outputText id="optxColumUsuario" value="#{vehiculos.apellidos}"/>
                                        </h:column>
                                        <h:column id="columnFecha"  >
                                            <f:facet id="facetColumnFecha" name="Curp">
                                                <h:outputLabel id="optLabelCurp" value="Curp"/>
                                            </f:facet>
                                            <h:outputText id="fecha" value="#{vehiculos.curp}"  >
                                            </h:outputText>
                                        </h:column>
                                    </h:dataTable>
                                </div>
                            </div>
                        </h:panelGroup>
                </h:form>
            </div>
    </h:body>
</html>

